# For Yazi (https://yazi-rs.github.io/docs/image-preview/#tmux)
# set -ga update-environment TERM
# set -ga update-environment TERM_PROGRAM

# set -g default-terminal "screen-256color"
# set -ag terminal-overrides ",xterm-256color:RGB"

set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

set-option -g prefix C-a
unbind C-b
bind C-a send-prefix

set-option -g base-index 1
set-option -g pane-base-index 1

set-option -g mouse on

set-option -g set-titles on
set-option -g set-titles-string "#{pane_title}"

bind c new-window -c "#{pane_current_path}"
bind - split-window -c "#{pane_current_path}"
bind \\ split-window -h -c "#{pane_current_path}"

bind & kill-window
bind x kill-pane

bind [ copy-mode

setw -g mode-keys vi
set -g allow-passthrough on
set-option -g set-clipboard on
set-option -s focus-events on
set-option -s extended-keys on
set-option -g status-position top
set-option -sg escape-time 0

rosewater="#f4dbd6"
flamingo="#f0c6c6"
pink="#f5bde6"
teal="#8bd5ca"
sky="#91d7e3"
text="#cad3f5"
subtexta="#b8c0e0"
subtextb="#a5adcb"
overlaya="#939ab7"
overlayb="#8087a2"
overlayc="#6e738d"
base="#24273a"
mantle="#1e2030"
crust="#181926"
surfacea="#5b6078"
surfaceb="#494d64"
surfacec="#363a4f"

HALF_ROUND_CLOSE="#(printf '\uE0B4')"

set-option -g status-style bg=${crust},fg=${text}
set-option -g status-left "#[bg=${pink}]#[fg=${crust}] #S "
# set-option -g status-justify absolute-centre
set-option -g status-justify left

set-option -g status-right "#[fg=${teal}]#{user} #[fg=${crust}]#[bg=${pink}] #H "

set-option -g window-status-format "#[fg=${overlaya}] #W "
# set-option -g window-status-current-format "#[fg=${pink}]#W"
set-option -g window-status-current-format "#[fg=${subtexta}]#[bg=${surfaceb}] #W "
set-option -g window-status-separator ""

set-option -g message-style fg=${crust},bg=${pink}

# Source D-Bus session
set-option -g default-command "bash -c 'if [ -f ~/.cache/dbus-session ]; then source ~/.cache/dbus-session; fi; exec $SHELL'"
